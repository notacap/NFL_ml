getwd()
setwd("C:/Users/nocap/Desktop/code/NFL_ml/web_scrape/scraped_data/nflfastR/receiver_data")
getwd()
library(nflverse)
library(tidyverse)
# Check your setup works
nflverse_sitrep()
# Load pre-aggregated WR stats (2022-2025)
wr_data <- load_player_stats(seasons = 2022:2025, summary_level = "week") |>
filter(position == "WR") |>
select(player_id, player_display_name, season, week, team, recent_team,
target_share, receiving_epa, air_yards_share, wopr, racr)
library(nflverse)
library(tidyverse)
# Check your setup works
nflverse_sitrep()
# Load pre-aggregated WR stats (2022-2025)
wr_data <- load_player_stats(seasons = 2022:2025, summary_level = "week") |>
filter(position == "WR") |>
select(player_id, player_display_name, season, week, team,
target_share, receiving_epa, air_yards_share, wopr, racr)
# Export for Python
write_csv(wr_data, "wr_features_2022_2025.csv")
library(nflverse)
library(tidyverse)
# Check your setup works
nflverse_sitrep()
# Load pre-aggregated WR stats (2022-2025)
wr_data <- load_player_stats(seasons = 2022:2025, summary_level = "week") |>
filter(position == "WR") |>
select(player_id, player_display_name, season, week, team, targets,
target_share, receiving_epa, air_yards_share, wopr, racr)
# Export for Python
write_csv(wr_data, "wr_features_2022_2025.csv")
library(nflreadr)
# Check the week values in each dataset
test_player <- load_player_stats(seasons = 2024)
unique(test_player$week)
test_ngs <- load_nextgen_stats(seasons = 2024, stat_type = "receiving")
unique(test_ngs$week)
library(nflreadr)
# Receiving Next Gen Stats (for WRs/TEs)
ngs_receiving <- load_nextgen_stats(
seasons = 2022:2025,
stat_type = "receiving"
)
# Filter to WRs and select key columns
ngs_wr <- ngs_receiving |>
filter(player_position == "WR") |>
select(player_gsis_id, player_display_name, season, week, team_abbr,
targets, receptions, yards,
avg_cushion, avg_separation,
avg_yac, avg_expected_yac, avg_yac_above_expectation,
percent_share_of_intended_air_yards, catch_percentage)
# Preview
head(ngs_wr, 20)
# Export
write_csv(ngs_wr, "ngs_wr_receiving_2022_2025.csv")
library(nflverse)
library(tidyverse)
# Check your setup works
nflverse_sitrep()
# Load pre-aggregated QB stats (2022-2025)
qb_data <- load_player_stats(seasons = 2022:2025, summary_level = "week") |>
filter(position == "QB") |>
select(player_id, player_display_name, season, week, team, passing_epa, pacr,passing_cpoe)
# Export for Python
write_csv(wr_data, "qb_features_2022_2025.csv")
library(nflverse)
library(tidyverse)
# Check your setup works
nflverse_sitrep()
# Load pre-aggregated QB stats (2022-2025)
qb_data <- load_player_stats(seasons = 2022:2025, summary_level = "week") |>
filter(position == "QB") |>
select(player_id, player_display_name, season, week, team, passing_epa, pacr,passing_cpoe)
# Export for Python
write_csv(wr_data, "qb_features_2022_2025.csv")
library(nflverse)
library(tidyverse)
# Check your setup works
nflverse_sitrep()
# Load pre-aggregated QB stats (2022-2025)
qb_data <- load_player_stats(seasons = 2022:2025, summary_level = "week") |>
filter(position == "QB") |>
select(player_id, player_display_name, season, week, team, passing_epa, pacr,passing_cpoe)
# Export for Python
write_csv(wr_data, "qb_features_2022_2025.csv")
library(nflverse)
library(tidyverse)
# Check your setup works
nflverse_sitrep()
# Load pre-aggregated QB stats (2022-2025)
qb_data <- load_player_stats(seasons = 2022:2025, summary_level = "week") |>
filter(position == "QB") |>
select(player_id, player_display_name, season, week, team, passing_epa, pacr,passing_cpoe)
# Export for Python
write_csv(qb_data, "qb_features_2022_2025.csv")
ngs_passing <- load_nextgen_stats(
seasons = 2022:2025,
stat_type = "passing"
)
ngs_qb <- ngs_passing |>
select(player_gsis_id, player_display_name, season, week, team_abbr,
avg_time_to_throw, aggressiveness,
avg_intended_air_yards, avg_air_yards_to_sticks,
expected_completion_percentage, completion_percentage_above_expectation)
write_csv(ngs_qb, "ngs_qb_passing.csv")
